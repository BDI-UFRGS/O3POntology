name: Deploy Ontology Docs

on:
  push:
    branches:
      - main  # Ou 'master', dependendo do seu repo
    paths:
      - '**.ttl' # Roda sempre que mudar um arquivo turtle
      - '.github/workflows/widoco.yml'

permissions:
  contents: write

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Set up JDK 11
        uses: actions/setup-java@v3
        with:
          java-version: '11'
          distribution: 'temurin'

      - name: Download Widoco
        run: wget https://github.com/dgarijo/Widoco/releases/download/v1.4.25/widoco-1.4.25-jar-with-dependencies_JDK-11.jar -O widoco.jar

      - name: Generate Documentation
        run: |
          mkdir -p public
          
          # --- AJUSTE AQUI O CAMINHO DO SEU ARQUIVO ---
          ONTOLOGY_FILE="o3po.ttl" 
          # --------------------------------------------

          java -jar widoco.jar \
            -ontFile $ONTOLOGY_FILE \
            -outFolder public \
            -rewriteAll \
            -webVowl \
            -lang en-pt \
            -getOntologyMetadata \
            -oops
            
          # Copia o index em inglÃªs para ser a home page
          if [ -f "doc/index-en.html" ]; then
             cp doc/index-en.html doc/index.html
          fi

      - name: Deploy to GitHub Pages
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          folder: public # A pasta que o Widoco gerou
          branch: gh-pages # O branch onde o site vai morar
